# Create Cross-Agent AI Starter Files

**Status**: ✅ Completed  
**Date**: November 2025  
**Labels**: ai:agents, agent:devtooling, priority:high

---

## Goal

Add high-level AI starter files so common coding agents work well from day one. Keep content tool/framework/language neutral, but **when agents generate follow-ups they must adapt to this codebase** (stack, tools, CI, links to upstream docs). **Use the Operating Loop below as a _guide_ when drafting each instruction file.** Before finalising any item, **look up the latest upstream docs / best practices**.

---

## Files to add (with references)

1. **`AGENTS.md` (repo root)**  
   Single source of truth for agent roles, responsibilities, the Operating Loop, conventions, and safety rails. Include links and "how to stay in context".  
   Refs: trunk-based dev ([Atlassian](https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development), [Fowler](https://martinfowler.com/articles/continuousIntegration.html)), Conventional Commits ([spec](https://www.conventionalcommits.org/en/v1.0.0/)), DRY ([wiki](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)), SOLID ([wiki](https://en.wikipedia.org/wiki/SOLID)), Diátaxis ([overview](https://diataxis.fr/)), Security (OWASP [Top 10](https://owasp.org/www-project-top-ten/), [Cheat Sheets](https://cheatsheetseries.owasp.org/index.html)), Accessibility (WCAG 2.2 [W3C](https://www.w3.org/TR/WCAG22/)).

2. **GitHub Copilot – repository instructions**  
   Add **`.github/copilot-instructions.md`** with the Operating Loop + repo norms; consider path-specific instruction files later.  
   Refs: repository custom instructions ([docs](https://docs.github.com/copilot/customizing-copilot/adding-custom-instructions-for-github-copilot), [first custom instructions](https://docs.github.com/en/copilot/tutorials/customization-library/custom-instructions/your-first-custom-instructions)), Copilot coding agent ([about](https://docs.github.com/en/copilot/concepts/agents/coding-agent/about-coding-agent), [how-tos](https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent)).

3. **Anthropic Claude**  
   Create **`docs/ai/claude/PROJECT_INSTRUCTIONS.md`** suitable for a Claude **Project**. Include loop, repo norms, and where to find architecture/docs.  
   Refs: Claude Projects ([support](https://support.anthropic.com/en/articles/9519177-how-can-i-create-and-manage-projects)), Claude Code settings ([docs](https://docs.claude.com/en/docs/claude-code/settings)), agentic coding tips ([best practices](https://www.anthropic.com/engineering/claude-code-best-practices)).

4. **Google Gemini Code Assist**  
   Create **`.gemini/styleguide.md`** (behaviour/style guidance for reviews, PRs, etc).  
   Refs: customise behaviour in GitHub ([docs](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github)), review with Gemini ([guide](https://developers.google.com/gemini-code-assist/docs/review-github-code)).

5. **Cursor**  
   Create **`.cursor/rules/000-foundations.md`** with the Operating Loop + repo norms and links.  
   Refs: Cursor Rules ([docs](https://cursor.com/docs/context/rules)).

> If you later add another agent, create `docs/ai/<agent>/PROJECT_INSTRUCTIONS.md` or a tool-specific config in the conventional path, and link official docs.

---

## Coding Agent Operating Loop (use this as a _guide_ for each instruction file)

Work in tiny loops: **clarify → look up official docs → research best approach → change → lint/format → test → self-review → document → run local CI → sync with `main` → commit (Conventional Commits) → sync with `main` again → reflect.** Keep the codebase readable, maintainable, accessible, and secure. **Re-read this loop at the start of every task and roughly every ~50k tokens used.**  
Refs: trunk-based dev ([Atlassian](https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development), [Fowler](https://martinfowler.com/articles/continuousIntegration.html)), Conventional Commits ([spec](https://www.conventionalcommits.org/en/v1.0.0/)), Diátaxis ([start here](https://diataxis.fr/start-here/)).

### Ground rules

- Small branches and PRs; keep `main` releasable. Use feature flags when needed.
- Commits follow **Conventional Commits** (`feat:`, `fix:`, `chore:`, `docs:`…).
- Apply **DRY** sensibly (use the **rule of three** before extracting) and **SOLID** where it improves testability/extensibility.
- Update docs as you go (Diátaxis split: tutorials/how-tos/reference/explanation).

### Quality bar – every change

- Lint/format **before** tests; keep warnings at zero.
- Tests first or concurrent: many small unit tests, targeted integration, few e2e; keep suites fast and deterministic.
- Refactor in tiny, behaviour-preserving steps.

### Security, privacy, reliability

- Design with **OWASP Top 10** in mind; use the **Cheat Sheet Series** and secure coding checklist. Never commit secrets; validate inputs; encode outputs; least privilege.  
  Refs: OWASP [Top 10](https://owasp.org/www-project-top-ten/), [Cheat Sheets](https://cheatsheetseries.owasp.org/index.html).

### Accessibility, UX, DevEx

- Aim for **WCAG 2.2 AA**; sanity-check UX against **Nielsen's 10 heuristics**.  
  Refs: WCAG 2.2 ([W3C](https://www.w3.org/TR/WCAG22/)), Nielsen heuristics ([NN/g](https://www.nngroup.com/articles/ten-usability-heuristics/)).

### Research and consistency

- **Before implementing**, read the latest **primary docs** for the tool you're touching and one reputable guide; link sources in the PR.
- Conform to existing repo patterns; if deviating, explain and migrate incrementally.

### Keep your branch in sync with `main` (before **and** after every commit)

- **Before each commit**: fetch and integrate the latest `main` into your feature branch:
  - Prefer a linear history: `git fetch origin && git rebase origin/main` ([git-rebase](https://git-scm.com/docs/git-rebase), [Atlassian rebase guide](https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase)).
  - Alternatively, merge if your team prefers: `git fetch origin && git merge origin/main` ([merge vs rebase](https://www.atlassian.com/git/tutorials/merging-vs-rebasing)).
- **After the commit (before push)**: repeat the sync quickly to catch new upstream changes; resolve conflicts, **re-run local CI**, then push (use `--force-with-lease` if you rebased) ([git-pull with rebase](https://git-scm.com/docs/git-pull), [kernel git-pull](https://www.kernel.org/pub/software/scm/git/docs/git-pull.html)).

### Run CI locally before you push

- Use pre-commit/pre-push hooks to run the same commands CI runs (lint/format/tests/type-checks).
- Optionally simulate **GitHub Actions** locally with `act` ([repo](https://github.com/nektos/act)).
- Keep PRs green – do **not** merge red builds.  
  Refs: Actions events/runners ([events](https://docs.github.com/actions/learn-github-actions/events-that-trigger-workflows), [runners](https://docs.github.com/actions/using-github-hosted-runners/about-github-hosted-runners)).

---

## Acceptance criteria

- [x] `AGENTS.md` (root) exists with this Operating Loop (as guidance), links, and repo-specific notes.
- [x] `.github/copilot-instructions.md` created and aligned with the loop + repo norms (path-specific instruction files noted if applicable).
- [x] `docs/ai/claude/PROJECT_INSTRUCTIONS.md` created with paste-ready guidance and links to Claude Project/Code docs.
- [x] `.gemini/styleguide.md` created with high-level guidance and links to Gemini customisation docs.
- [x] `.cursor/rules/000-foundations.md` created with the loop and links.
- [x] Each file reminds the agent to adapt content to **this** codebase (stack, tools, CI, references).
- [x] This issue body saved to **`/docs/ai/prompts/000.ai-starter-files.md`** for traceability (similar to the app-setup prompt doc).
- [x] PR description lists the exact upstream docs consulted for each file and any repo-specific decisions.

---

## Implementation Notes

### Files Created/Updated

1. **`AGENTS.md`** (updated)
   - Added Operating Loop section with full workflow details
   - Added "How to Stay in Context" section
   - Enhanced Core Principles with loop integration
   - Added "Synorg Stack & Context" section with technology stack details
   - Included references to all upstream documentation

2. **`.github/copilot-instructions.md`** (updated)
   - Added Operating Loop with ground rules
   - Added Security & Accessibility section
   - Added sync with `main` guidelines
   - Added "Run CI Locally" section
   - Added "Path-Specific Instructions" section with references to Copilot documentation

3. **`docs/ai/claude/PROJECT_INSTRUCTIONS.md`** (created)
   - Comprehensive paste-ready instructions for Claude Projects
   - Full Operating Loop included
   - Synorg-specific stack and tools documentation
   - Claude-specific tips and best practices
   - References to Claude Projects and Claude Code documentation

4. **`.gemini/styleguide.md`** (created)
   - Code review and PR guidelines
   - Operating Loop for code changes
   - Synorg-specific patterns and commands
   - Security and accessibility standards
   - References to Gemini Code Assist documentation

5. **`.cursor/rules/000-foundations.md`** (created)
   - Foundational rules for Cursor AI
   - Complete Operating Loop
   - Synorg code style and testing philosophy
   - Architecture and documentation locations
   - Reference to Cursor Rules documentation

6. **`docs/ai/prompts/000.ai-starter-files.md`** (this file)
   - Documents the original issue for traceability
   - Includes all acceptance criteria
   - Lists implementation notes and decisions

### Upstream Documentation Consulted

#### General References

- [Trunk-based development (Atlassian)](https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development)
- [Continuous Integration (Martin Fowler)](https://martinfowler.com/articles/continuousIntegration.html)
- [Conventional Commits specification](https://www.conventionalcommits.org/en/v1.0.0/)
- [DRY principle (Wikipedia)](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)
- [SOLID principles (Wikipedia)](https://en.wikipedia.org/wiki/SOLID)
- [Diátaxis documentation framework](https://diataxis.fr/)
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/index.html)
- [WCAG 2.2](https://www.w3.org/TR/WCAG22/)
- [Nielsen's 10 Usability Heuristics](https://www.nngroup.com/articles/ten-usability-heuristics/)

#### Git & CI/CD

- [git-rebase documentation](https://git-scm.com/docs/git-rebase)
- [Atlassian rebase guide](https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase)
- [Merge vs rebase](https://www.atlassian.com/git/tutorials/merging-vs-rebasing)
- [git-pull with rebase](https://git-scm.com/docs/git-pull)
- [act - Run GitHub Actions locally](https://github.com/nektos/act)
- [GitHub Actions events](https://docs.github.com/actions/learn-github-actions/events-that-trigger-workflows)
- [GitHub-hosted runners](https://docs.github.com/actions/using-github-hosted-runners/about-github-hosted-runners)

#### GitHub Copilot

- [Adding repository custom instructions](https://docs.github.com/copilot/customizing-copilot/adding-custom-instructions-for-github-copilot)
- [Your first custom instructions](https://docs.github.com/en/copilot/tutorials/customization-library/custom-instructions/your-first-custom-instructions)
- [About Copilot coding agent](https://docs.github.com/en/copilot/concepts/agents/coding-agent/about-coding-agent)
- [Using coding agent](https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent)

#### Claude

- [Claude Projects documentation](https://support.anthropic.com/en/articles/9519177-how-can-i-create-and-manage-projects)
- [Claude Code settings](https://docs.claude.com/en/docs/claude-code/settings)
- [Agentic coding best practices](https://www.anthropic.com/engineering/claude-code-best-practices)

#### Gemini

- [Customize Gemini behavior in GitHub](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github)
- [Review GitHub code with Gemini](https://developers.google.com/gemini-code-assist/docs/review-github-code)

#### Cursor

- [Cursor Rules documentation](https://cursor.com/docs/context/rules)

### Repository-Specific Decisions

1. **Operating Loop Integration**: The Operating Loop from the issue was used as the foundation for all instruction files, ensuring consistency across all AI agents.

2. **Synorg Stack Documentation**: Each file includes specific references to Synorg's technology stack (Rails 8.1.1 edge, Ruby 3.2.3, PostgreSQL, Solid Queue, Tailwind CSS v4, TypeScript, Hotwire, RSpec) to ensure agents adapt their suggestions to this codebase.

3. **Conventional Structure**: Each agent-specific file follows a similar structure (Overview → Operating Loop → Ground Rules → Quality Bar → Security → Accessibility → Research → Sync → CI → Specifics) for consistency while adapting to each tool's specific needs.

4. **Comprehensive References**: All files include extensive links to upstream documentation and best practices, ensuring agents can look up current information when needed.

5. **Tool-Specific Adaptations**:
   - **Copilot**: Focus on repository instructions with note about path-specific files
   - **Claude**: Paste-ready format for Claude Projects with emphasis on research and documentation
   - **Gemini**: Code review and PR focus with style guide format
   - **Cursor**: Rules-based format with foundational conventions

6. **Documentation Traceability**: This issue is saved to `docs/ai/prompts/000.ai-starter-files.md` following the pattern established by `001.initial-rails-application.md`.

### Future Enhancements

- Consider adding path-specific instruction files for `.github/copilot-instructions/` as the repository grows
- May add additional agent-specific files following the pattern: `docs/ai/<agent>/PROJECT_INSTRUCTIONS.md`
- Could expand Cursor rules with domain-specific files (e.g., `001-backend.md`, `002-frontend.md`)
